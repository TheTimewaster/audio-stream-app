<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<dom-module id="player-list">
	<style>
		:host {
			z-index:5;
			display:none;
			width:100%;
			position:absolute;
			top:64px;
		}
		#listContainer
		{
			height:400px;
			background-color:var(--paper-grey-50);
			overflow: auto;
		}
		.playListRow:hover
		{
			background-color: var(--paper-grey-300)
		}
		.playListRow .cover
		{
			width: 48px;
			height: 48px;
			background-color: var(--paper-red-50);
			margin-right: 16px;
		}
	</style>
	<template>
		<div id="listContainer">
			<template is="dom-repeat" items="{{playList.tracks}}" as="track">
				<paper-item class="playListRow">
					<template is="dom-if" if="{{track.start}}">
						<div class="cover" style="background-color:black"></div>
					</template>
					<template is="dom-if" if="{{!track.start}}">
						<div class="cover"></div>
					</template>
					<paper-item-body two-line>
						<span>{{track.name}}</span>
						<span secondary>{{concatAlbumAndArtistString(track.artist,track.album)}}</span>
					</paper-item-body>
					
					<span>{{track.length}}</span>
				</paper-item>
			</template>
		</div>
	</template>
	<script>
		Polymer({
			is: 'player-list',
			properties:
			{
				playingTrack:
				{
					type:Object,
					notify:true
				},
				playList:
				{
					type:Object,
					observer:"playListChanged"
				},
				visible:
				{
					type:Boolean
				}
			},
			ready:function()
			{
				this.visible = true;
			},
			playListChanged:function(newValue, oldValue)
			{
				if(newValue != undefined)
				{
					this.playingTrack = newValue.tracks[newValue.startIndex]
					console.log(this.playingTrack);
				}
			},
			changeVisible:function()
			{
				if(this.visible)
				{
					this.style.display = "block";
				}
				else
				{
					this.style.display = "none";
				}

				this.visible = !this.visible;
				return this.visible;
			},
			concatAlbumAndArtistString:function(artist, album)
			{
				return artist + " - " + album;
			}
		});
	</script>
</dom-module>