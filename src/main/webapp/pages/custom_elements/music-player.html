<link rel="import" href="/pages/bower_components/polymer/polymer.html">
<link rel="import" href="/pages/bower_components/paper-button/paper-button.html">
<dom-module id="music-player">
	<template>
		<paper-button on-click="clickToPlayHandler">
		play now!
		</paper-button>
		<paper-button on-click="clickToPlayNextHandler">
		play next!
		</paper-button>
		<audio id="player" controls>
			<source id="source" src="" type="audio/mpeg" codecs="mp3"/>
		</audio>
		<div>
			<span>{{objectid}}</span>	
		</div>
	</template>
	<script type="text/javascript">
	"use strict";
		var player;
		var source;

		Polymer({
			is:"music-player",
			properties:
			{
				objectid:
				{
					type:String,
					value:"5594ed7e8c95fd1a94ea4241",
					observer: '_objectidChanged'
				}
			},
						ready:function()
			{
				player = this.querySelector('#player');
				source = this.querySelector("#player > source");
				player.load();
			},
			_objectidChanged: function(newValue, oldValue)
			{
				if(oldValue != null)
				{
					var url = "api/stream/" + this.objectid;
					source.src = url;
					player.load();

				}
			}
		});
	</script>
</dom-module>